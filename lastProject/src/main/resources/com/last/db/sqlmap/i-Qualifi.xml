<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL MAP 2.0//EN" 
 "http://www.ibatis.com/dtd/sql-map-2.dtd">
 
<sqlMap namespace="Qualifi">

	<typeAlias alias="str" type="java.lang.String" />
	<typeAlias alias="int" type="java.lang.Integer"/>
	<typeAlias alias="qualifiCerti" type="com.last.common.vo.QualifiCertiVO"/>
	<typeAlias alias="qualifiMember" type="com.last.common.vo.QualifiMemberVO"/>
	
	<select id="qualifiCertiCount" parameterClass="str" resultClass="int">
		select count(*)
			from qualifi_certi qc, qualifi_certi_iss qci,mem m ,stare s,em_info e,exkind ex
			where qc.qualifi_certi_code = qci.qualifi_certi_code
			and qci.mem_code = m.mem_code
			and s.mem_code = m.mem_code
			and e.em_info_code = s.em_info_code
			and e.em_exkind = ex.exkind_code
			and qci.mem_code = #mem_code#
	</select>
	
	<select id="selectQualifiCertiList" parameterClass="str" resultClass="qualifiCerti">
		select qc.qualifi_certi_code,
			  qci.written_pass_date,
			  ex.exkind_nm,
			  s.actual_pass_date,
			  qc.qualifi_certi_count,
			  qc.qualifi_certi_iss_pr
			from qualifi_certi qc, qualifi_certi_iss qci,mem m ,stare s,em_info e,exkind ex
			where qc.qualifi_certi_code = qci.qualifi_certi_code
			and qci.mem_code = m.mem_code
			and s.mem_code = m.mem_code
			and e.em_info_code = s.em_info_code
			and e.em_exkind = ex.exkind_code
			and qci.mem_code = #mem_code#
	</select>
	
	<select id="selectQualifiPriceList" parameterClass="str" resultClass="qualifiCerti">
		select
			  qc.qualifi_certi_code,
			  qci.written_pass_date,
			  ex.exkind_nm,
			  s.actual_pass_date,
			  qc.qualifi_certi_count,
			  qc.qualifi_certi_iss_pr
			from qualifi_certi qc, qualifi_certi_iss qci,mem m ,stare s,em_info e,exkind ex
			where qc.qualifi_certi_code = qci.qualifi_certi_code
			and qci.mem_code = m.mem_code
			and s.mem_code = m.mem_code
			and e.em_info_code = s.em_info_code
			and e.em_exkind = ex.exkind_code
			and qc.qualifi_certi_code = #qualifi_certi_code#
	</select>
	
	<select id="selectMemberInfoList" parameterClass="str" resultClass="qualifiMember">
		select mem_nm, mem_enname, reg_num1, mem_phone, mem_post_numb1, mem_add1, mem_add2, mem_add3,mem_photo
<!-- 		#mem_nm#, #mem_enname#, #reg_num1#, #mem_phone#, #mem_post_numb1#, #mem_add1#, #mem_add2#, #mem_add3# -->
		from mem 
		where mem_code = #mem_code#
	</select>
	
	<select id="selectMemAuth" parameterClass="str" resultClass="qualifiMember">
		select mem_nm,reg_num1 from mem where mem_code = #mem_code#	
	</select>
</sqlMap>
